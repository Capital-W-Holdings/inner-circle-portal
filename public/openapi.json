{
  "openapi": "3.0.3",
  "info": {
    "title": "Inner Circle Partners Portal API",
    "description": "API documentation for the Inner Circle Partners Portal - a comprehensive partner referral management system.\n\n## Authentication\n\nMost endpoints require authentication via Clerk. Include the session token in your requests.\n\n## Rate Limiting\n\nAPI requests are rate-limited to prevent abuse:\n- General endpoints: 100 requests per minute\n- Auth endpoints: 10 requests per minute\n- Webhook endpoints: 1000 requests per minute\n\n## Response Format\n\nAll responses follow a standard format:\n```json\n{\n  \"success\": true,\n  \"data\": { ... },\n  \"meta\": { \"timestamp\": \"...\" }\n}\n```\n\nError responses:\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"ERROR_CODE\",\n    \"message\": \"Human readable message\"\n  }\n}\n```",
    "version": "1.0.0",
    "contact": {
      "name": "Inner Circle Support",
      "email": "support@innercircle.co"
    },
    "license": {
      "name": "Proprietary",
      "url": "https://innercircle.co/terms"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    },
    {
      "url": "https://api.innercircle.co",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Health",
      "description": "System health and status endpoints"
    },
    {
      "name": "Partners",
      "description": "Partner profile and statistics"
    },
    {
      "name": "Campaigns",
      "description": "Campaign management"
    },
    {
      "name": "Payments",
      "description": "Payment and payout operations"
    },
    {
      "name": "Notifications",
      "description": "Partner notifications"
    },
    {
      "name": "Admin",
      "description": "Administrative operations (admin role required)"
    }
  ],
  "paths": {
    "/api/health": {
      "get": {
        "tags": ["Health"],
        "summary": "Health check",
        "description": "Returns the health status of the API and its dependencies",
        "operationId": "getHealth",
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                },
                "example": {
                  "success": true,
                  "data": {
                    "status": "healthy",
                    "version": "1.0.0",
                    "timestamp": "2024-01-10T12:00:00.000Z",
                    "services": {
                      "database": "connected",
                      "redis": "connected",
                      "stripe": "configured"
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Service unhealthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/partners/{id}/stats": {
      "get": {
        "tags": ["Partners"],
        "summary": "Get partner statistics",
        "description": "Returns detailed statistics for a partner including earnings, referrals, and conversion rates",
        "operationId": "getPartnerStats",
        "security": [{ "clerkAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Partner ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Partner statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PartnerStatsResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/partners/{id}/analytics": {
      "get": {
        "tags": ["Partners"],
        "summary": "Get partner analytics",
        "description": "Returns time-series analytics data for charts and reports",
        "operationId": "getPartnerAnalytics",
        "security": [{ "clerkAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "period",
            "in": "query",
            "description": "Time period for analytics",
            "schema": {
              "type": "string",
              "enum": ["7d", "30d", "90d", "365d"],
              "default": "30d"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Analytics data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalyticsResponse"
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      }
    },
    "/api/partners/{id}/campaigns": {
      "get": {
        "tags": ["Campaigns"],
        "summary": "List partner campaigns",
        "description": "Returns all campaigns for a partner",
        "operationId": "listCampaigns",
        "security": [{ "clerkAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["ACTIVE", "PAUSED", "ARCHIVED"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of campaigns",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampaignsListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Campaigns"],
        "summary": "Create campaign",
        "description": "Creates a new campaign for the partner",
        "operationId": "createCampaign",
        "security": [{ "clerkAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCampaignRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Campaign created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampaignResponse"
                }
              }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" }
        }
      }
    },
    "/api/partners/{id}/payouts": {
      "get": {
        "tags": ["Payments"],
        "summary": "List partner payouts",
        "description": "Returns payout history for a partner",
        "operationId": "listPayouts",
        "security": [{ "clerkAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["PENDING", "PROCESSING", "COMPLETED", "FAILED", "CANCELLED"]
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 20, "maximum": 100 }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": { "type": "integer", "default": 0 }
          }
        ],
        "responses": {
          "200": {
            "description": "List of payouts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PayoutsListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/partners/{id}/milestones": {
      "get": {
        "tags": ["Partners"],
        "summary": "Get partner milestones",
        "description": "Returns milestone progress for gamification",
        "operationId": "getMilestones",
        "security": [{ "clerkAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Milestone progress",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MilestonesResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/partners/interest": {
      "post": {
        "tags": ["Partners"],
        "summary": "Submit partner interest",
        "description": "Submit an application to become a partner",
        "operationId": "submitInterest",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PartnerInterestRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Interest submitted"
          },
          "400": { "$ref": "#/components/responses/ValidationError" }
        }
      }
    },
    "/api/payments/connect": {
      "post": {
        "tags": ["Payments"],
        "summary": "Create Stripe Connect account",
        "description": "Creates a Stripe Connect Express account for the partner",
        "operationId": "createConnectAccount",
        "security": [{ "clerkAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["partnerId"],
                "properties": {
                  "partnerId": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "country": { "type": "string", "default": "US" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Account created with onboarding URL",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "accountId": { "type": "string" },
                        "onboardingUrl": { "type": "string", "format": "uri" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/payments/payout": {
      "post": {
        "tags": ["Payments"],
        "summary": "Request payout",
        "description": "Request a payout of available earnings",
        "operationId": "requestPayout",
        "security": [{ "clerkAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["partnerId", "amount"],
                "properties": {
                  "partnerId": { "type": "string" },
                  "amount": { 
                    "type": "integer",
                    "description": "Amount in cents",
                    "minimum": 1000
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payout requested",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PayoutResponse"
                }
              }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" }
        }
      }
    },
    "/api/payments/dashboard": {
      "get": {
        "tags": ["Payments"],
        "summary": "Get Stripe dashboard link",
        "description": "Returns a link to the partner's Stripe Express dashboard",
        "operationId": "getDashboardLink",
        "security": [{ "clerkAuth": [] }],
        "parameters": [
          {
            "name": "partnerId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard URL",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "url": { "type": "string", "format": "uri" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/payments/webhook": {
      "post": {
        "tags": ["Payments"],
        "summary": "Stripe webhook",
        "description": "Receives Stripe webhook events",
        "operationId": "stripeWebhook",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "type": "object" }
            }
          }
        },
        "responses": {
          "200": { "description": "Webhook processed" },
          "400": { "description": "Invalid webhook" }
        }
      }
    },
    "/api/notifications": {
      "get": {
        "tags": ["Notifications"],
        "summary": "List notifications",
        "description": "Returns notifications for the authenticated user",
        "operationId": "listNotifications",
        "security": [{ "clerkAuth": [] }],
        "parameters": [
          {
            "name": "unreadOnly",
            "in": "query",
            "schema": { "type": "boolean", "default": false }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 20 }
          }
        ],
        "responses": {
          "200": {
            "description": "List of notifications",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotificationsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/leaderboard": {
      "get": {
        "tags": ["Partners"],
        "summary": "Get leaderboard",
        "description": "Returns the partner leaderboard rankings",
        "operationId": "getLeaderboard",
        "security": [{ "clerkAuth": [] }],
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["week", "month", "all"],
              "default": "month"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 10 }
          }
        ],
        "responses": {
          "200": {
            "description": "Leaderboard data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LeaderboardResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/experiments": {
      "get": {
        "tags": ["Partners"],
        "summary": "Get active experiments",
        "description": "Returns A/B test experiments the user is enrolled in",
        "operationId": "getExperiments",
        "security": [{ "clerkAuth": [] }],
        "responses": {
          "200": {
            "description": "Active experiments",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExperimentsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/stats": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get admin dashboard stats",
        "description": "Returns aggregate statistics for the admin dashboard",
        "operationId": "getAdminStats",
        "security": [{ "clerkAuth": [], "adminRole": [] }],
        "responses": {
          "200": {
            "description": "Admin statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminStatsResponse"
                }
              }
            }
          },
          "403": { "$ref": "#/components/responses/Forbidden" }
        }
      }
    },
    "/api/admin/partners": {
      "get": {
        "tags": ["Admin"],
        "summary": "List all partners",
        "description": "Returns a list of all partners with filtering options",
        "operationId": "adminListPartners",
        "security": [{ "clerkAuth": [], "adminRole": [] }],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["ACTIVE", "PENDING", "INACTIVE", "SUSPENDED"]
            }
          },
          {
            "name": "tier",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["STANDARD", "SILVER", "GOLD", "PLATINUM"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of partners",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminPartnersResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/partners/{id}/action": {
      "post": {
        "tags": ["Admin"],
        "summary": "Perform partner action",
        "description": "Approve, suspend, activate, or change tier of a partner",
        "operationId": "adminPartnerAction",
        "security": [{ "clerkAuth": [], "adminRole": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["action"],
                "properties": {
                  "action": {
                    "type": "string",
                    "enum": ["approve", "suspend", "activate", "upgrade", "downgrade"]
                  },
                  "tier": {
                    "type": "string",
                    "enum": ["STANDARD", "SILVER", "GOLD", "PLATINUM"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Action performed" },
          "400": { "$ref": "#/components/responses/ValidationError" }
        }
      }
    },
    "/api/admin/payouts": {
      "get": {
        "tags": ["Admin"],
        "summary": "List all payouts",
        "description": "Returns all payout requests with filtering",
        "operationId": "adminListPayouts",
        "security": [{ "clerkAuth": [], "adminRole": [] }],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["PENDING", "PROCESSING", "COMPLETED", "FAILED", "CANCELLED"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of payouts"
          }
        }
      }
    },
    "/api/admin/payouts/{id}/action": {
      "post": {
        "tags": ["Admin"],
        "summary": "Process payout",
        "description": "Approve, process, or reject a payout request",
        "operationId": "adminPayoutAction",
        "security": [{ "clerkAuth": [], "adminRole": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["action"],
                "properties": {
                  "action": {
                    "type": "string",
                    "enum": ["approve", "process", "reject"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Action performed" }
        }
      }
    },
    "/api/admin/bulk": {
      "post": {
        "tags": ["Admin"],
        "summary": "Bulk operations",
        "description": "Perform bulk actions on partners or payouts",
        "operationId": "adminBulkAction",
        "security": [{ "clerkAuth": [], "adminRole": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["action", "ids"],
                "properties": {
                  "action": {
                    "type": "string",
                    "enum": [
                      "approve_partners",
                      "suspend_partners",
                      "activate_partners",
                      "approve_payouts",
                      "reject_payouts"
                    ]
                  },
                  "ids": {
                    "type": "array",
                    "items": { "type": "string" },
                    "minItems": 1
                  },
                  "tier": {
                    "type": "string",
                    "enum": ["STANDARD", "SILVER", "GOLD", "PLATINUM"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk operation result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkOperationResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/export": {
      "get": {
        "tags": ["Admin"],
        "summary": "Export data",
        "description": "Export partners, payouts, or referrals as CSV",
        "operationId": "adminExport",
        "security": [{ "clerkAuth": [], "adminRole": [] }],
        "parameters": [
          {
            "name": "type",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "enum": ["partners", "payouts", "referrals"]
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string" }
          },
          {
            "name": "startDate",
            "in": "query",
            "schema": { "type": "string", "format": "date" }
          },
          {
            "name": "endDate",
            "in": "query",
            "schema": { "type": "string", "format": "date" }
          }
        ],
        "responses": {
          "200": {
            "description": "CSV file",
            "content": {
              "text/csv": {
                "schema": { "type": "string" }
              }
            }
          }
        }
      }
    },
    "/api/email/send": {
      "post": {
        "tags": ["Admin"],
        "summary": "Send email",
        "description": "Send an email to a partner (admin only)",
        "operationId": "sendEmail",
        "security": [{ "clerkAuth": [], "adminRole": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["to", "subject", "template"],
                "properties": {
                  "to": { "type": "string", "format": "email" },
                  "subject": { "type": "string" },
                  "template": {
                    "type": "string",
                    "enum": ["welcome", "conversion", "payout", "digest"]
                  },
                  "data": { "type": "object" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Email sent" }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "clerkAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Clerk session token"
      },
      "adminRole": {
        "type": "apiKey",
        "in": "header",
        "name": "X-Admin-Role",
        "description": "Requires admin role in Clerk user metadata"
      }
    },
    "schemas": {
      "HealthResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "status": { "type": "string", "enum": ["healthy", "degraded", "unhealthy"] },
              "version": { "type": "string" },
              "timestamp": { "type": "string", "format": "date-time" },
              "services": {
                "type": "object",
                "additionalProperties": { "type": "string" }
              }
            }
          }
        }
      },
      "PartnerStatsResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "totalEarnings": { "type": "integer", "description": "Total earnings in cents" },
              "pendingEarnings": { "type": "integer" },
              "totalReferrals": { "type": "integer" },
              "conversionRate": { "type": "number" },
              "activeCampaigns": { "type": "integer" },
              "tier": { "type": "string" },
              "nextTierProgress": { "type": "number" }
            }
          }
        }
      },
      "AnalyticsResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "earnings": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "date": { "type": "string", "format": "date" },
                    "amount": { "type": "integer" }
                  }
                }
              },
              "conversions": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "date": { "type": "string" },
                    "count": { "type": "integer" }
                  }
                }
              },
              "sources": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "source": { "type": "string" },
                    "clicks": { "type": "integer" },
                    "conversions": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      },
      "CampaignsListResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "campaigns": {
                "type": "array",
                "items": { "$ref": "#/components/schemas/Campaign" }
              }
            }
          }
        }
      },
      "Campaign": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "description": { "type": "string" },
          "status": { "type": "string", "enum": ["ACTIVE", "PAUSED", "ARCHIVED"] },
          "referralCode": { "type": "string" },
          "clicks": { "type": "integer" },
          "conversions": { "type": "integer" },
          "earnings": { "type": "integer" },
          "createdAt": { "type": "string", "format": "date-time" }
        }
      },
      "CreateCampaignRequest": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": { "type": "string", "minLength": 1, "maxLength": 100 },
          "description": { "type": "string", "maxLength": 500 },
          "customCode": { "type": "string", "pattern": "^[A-Z0-9_-]{3,20}$" }
        }
      },
      "CampaignResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "campaign": { "$ref": "#/components/schemas/Campaign" }
            }
          }
        }
      },
      "PayoutsListResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "payouts": {
                "type": "array",
                "items": { "$ref": "#/components/schemas/Payout" }
              },
              "total": { "type": "integer" }
            }
          }
        }
      },
      "Payout": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "amount": { "type": "integer", "description": "Amount in cents" },
          "fee": { "type": "integer" },
          "netAmount": { "type": "integer" },
          "status": { "type": "string", "enum": ["PENDING", "PROCESSING", "COMPLETED", "FAILED", "CANCELLED"] },
          "requestedAt": { "type": "string", "format": "date-time" },
          "processedAt": { "type": "string", "format": "date-time" }
        }
      },
      "PayoutResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "payout": { "$ref": "#/components/schemas/Payout" }
            }
          }
        }
      },
      "MilestonesResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "milestones": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "name": { "type": "string" },
                    "description": { "type": "string" },
                    "target": { "type": "integer" },
                    "current": { "type": "integer" },
                    "completed": { "type": "boolean" },
                    "reward": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      },
      "PartnerInterestRequest": {
        "type": "object",
        "required": ["email", "name"],
        "properties": {
          "email": { "type": "string", "format": "email" },
          "name": { "type": "string" },
          "company": { "type": "string" },
          "website": { "type": "string", "format": "uri" },
          "message": { "type": "string" }
        }
      },
      "NotificationsResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "notifications": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "type": { "type": "string" },
                    "title": { "type": "string" },
                    "message": { "type": "string" },
                    "read": { "type": "boolean" },
                    "createdAt": { "type": "string", "format": "date-time" }
                  }
                }
              },
              "unreadCount": { "type": "integer" }
            }
          }
        }
      },
      "LeaderboardResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "leaderboard": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "rank": { "type": "integer" },
                    "partnerId": { "type": "string" },
                    "name": { "type": "string" },
                    "tier": { "type": "string" },
                    "referrals": { "type": "integer" },
                    "earnings": { "type": "integer" }
                  }
                }
              },
              "currentUserRank": { "type": "integer" }
            }
          }
        }
      },
      "ExperimentsResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "experiments": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "name": { "type": "string" },
                    "variant": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      },
      "AdminStatsResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "stats": {
                "type": "object",
                "properties": {
                  "totalPartners": { "type": "integer" },
                  "activePartners": { "type": "integer" },
                  "pendingApprovals": { "type": "integer" },
                  "totalRevenue": { "type": "integer" },
                  "monthlyRevenue": { "type": "integer" },
                  "totalPayouts": { "type": "integer" },
                  "pendingPayouts": { "type": "integer" },
                  "conversionRate": { "type": "number" }
                }
              },
              "recentPartners": { "type": "array" },
              "recentPayouts": { "type": "array" },
              "chartData": { "type": "array" }
            }
          }
        }
      },
      "AdminPartnersResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "partners": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "name": { "type": "string" },
                    "email": { "type": "string" },
                    "referralCode": { "type": "string" },
                    "status": { "type": "string" },
                    "tier": { "type": "string" },
                    "totalEarnings": { "type": "integer" },
                    "totalReferrals": { "type": "integer" },
                    "createdAt": { "type": "string", "format": "date-time" }
                  }
                }
              }
            }
          }
        }
      },
      "BulkOperationResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "data": {
            "type": "object",
            "properties": {
              "total": { "type": "integer" },
              "successful": { "type": "integer" },
              "failed": { "type": "integer" },
              "errors": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "error": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean", "enum": [false] },
          "error": {
            "type": "object",
            "properties": {
              "code": { "type": "string" },
              "message": { "type": "string" },
              "details": { "type": "object" }
            }
          }
        }
      }
    },
    "responses": {
      "Unauthorized": {
        "description": "Authentication required",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/ErrorResponse" },
            "example": {
              "success": false,
              "error": {
                "code": "UNAUTHORIZED",
                "message": "Authentication required"
              }
            }
          }
        }
      },
      "Forbidden": {
        "description": "Insufficient permissions",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/ErrorResponse" },
            "example": {
              "success": false,
              "error": {
                "code": "FORBIDDEN",
                "message": "You do not have permission to access this resource"
              }
            }
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/ErrorResponse" },
            "example": {
              "success": false,
              "error": {
                "code": "NOT_FOUND",
                "message": "The requested resource was not found"
              }
            }
          }
        }
      },
      "ValidationError": {
        "description": "Validation error",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/ErrorResponse" },
            "example": {
              "success": false,
              "error": {
                "code": "VALIDATION_ERROR",
                "message": "Invalid request data",
                "details": {
                  "errors": {
                    "email": ["Invalid email format"]
                  }
                }
              }
            }
          }
        }
      },
      "RateLimited": {
        "description": "Rate limit exceeded",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/ErrorResponse" },
            "example": {
              "success": false,
              "error": {
                "code": "RATE_LIMITED",
                "message": "Too many requests. Please try again later."
              }
            }
          }
        }
      }
    }
  }
}
